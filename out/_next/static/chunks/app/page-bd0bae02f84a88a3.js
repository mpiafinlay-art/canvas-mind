(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67878:function(e,t,r){Promise.resolve().then(r.bind(r,32363))},32363:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(57437),a=r(2265),n=r(738),i=r(44752),o=r(5978),l=r(53459),c=r(67350),d=r(96471);let u=(0,d.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),p=(0,d.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var f=r(23340),m=r(12381);let h={apiKey:"AIzaSyDnDsbb2jVLZmgpfkrpdzA6yTFRpPo2f9c",authDomain:"canvasmind-app.firebaseapp.com",projectId:"canvasmind-app",storageBucket:"canvasmind-app.firebasestorage.app",messagingSenderId:"917199598510",appId:"1:917199598510:web:73840729e1333a07804e3f"};function x(){let e=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)(h),t=(0,i.v0)(e),r=(0,o.ad)(e);return{app:e,auth:t,firestore:r}}function g(){let{toast:e}=(0,f.pm)(),[t,r]=(0,a.useState)(!1),[n,d]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[b,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),C=(0,a.useRef)(!1),E=(0,a.useCallback)(async(t,r)=>{if(!C.current&&!n){C.current=!0,d(!0);try{let e=(0,o.JU)(r,"users",t.uid);(await (0,o.QT)(e)).exists()||await (0,o.pl)(e,{uid:t.uid,email:t.email,displayName:t.displayName||"Invitado",createdAt:(0,o.serverTimestamp)()});let s=(0,o.hJ)(r,"users",t.uid,"canvasBoards"),a=null;try{let e=(0,o.IO)(s,(0,o.Xo)("updatedAt","desc"),(0,o.b9)(1)),t=await (0,o.PL)(e);t.empty||(a=t.docs[0].id)}catch(t){let e=await (0,o.PL)(s);e.empty||(a=e.docs[0].id)}a||(a=(await (0,o.ET)(s,{name:"Mi Primer Tablero",userId:t.uid,createdAt:(0,o.serverTimestamp)(),updatedAt:(0,o.serverTimestamp)()})).id),window.location.href="/board/".concat(a,"/")}catch(t){console.error("Error:",t),C.current=!1,d(!1),e({variant:"destructive",title:"Error",description:"No se pudo cargar el tablero."})}}},[n,e]);(0,a.useEffect)(()=>{(async()=>{if(!C.current)try{let{auth:e,firestore:t}=x(),r=await (0,i.cx)(e);if(null==r?void 0:r.user){console.log("✅ Usuario de redirect:",r.user.email),await E(r.user,t);return}e.currentUser&&(console.log("✅ Usuario existente:",e.currentUser.email),await E(e.currentUser,t))}catch(e){console.error("Error checking auth:",e)}})()},[E]);let S=async()=>{if(!t){r(!0),C.current=!1;try{let{auth:e,firestore:t}=x(),r=new i.hJ;r.setCustomParameters({prompt:"select_account"}),console.log("\uD83D\uDD04 Abriendo popup de Google...");let s=await (0,i.rh)(e,r);console.log("✅ Login Google exitoso:",s.user.email),(null==s?void 0:s.user)&&await E(s.user,t)}catch(t){if(console.error("❌ Error Google:",t),"auth/popup-blocked"===t.code||"auth/popup-closed-by-user"===t.code)try{console.log("\uD83D\uDD04 Popup bloqueado, usando redirect...");let{auth:e}=x(),t=new i.hJ;t.setCustomParameters({prompt:"select_account"}),await (0,i.F6)(e,t);return}catch(t){console.error("❌ Error redirect:",t),e({variant:"destructive",title:"Error",description:"Error al iniciar sesi\xf3n con Google."})}else e({variant:"destructive",title:"Error",description:t.message||"Error al iniciar sesi\xf3n con Google."});r(!1)}}},D=async()=>{if(!t){r(!0),C.current=!1;try{let{auth:e,firestore:t}=x();console.log("\uD83D\uDD04 Iniciando como invitado...");let r=await (0,i.signInAnonymously)(e);console.log("✅ Login invitado exitoso"),(null==r?void 0:r.user)&&await E(r.user,t)}catch(t){console.error("❌ Error:",t),e({variant:"destructive",title:"Error",description:t.message||"Error al iniciar sesi\xf3n."}),r(!1)}}},k=async s=>{if(s.preventDefault(),!t&&b&&j){r(!0),C.current=!1;try{let t;let{auth:r,firestore:s}=x();y?(console.log("\uD83D\uDD04 Creando cuenta..."),t=await (0,i.Xb)(r,b,j),e({title:"\xa1Cuenta creada!",description:"Bienvenido a Mi Cerebro"})):(console.log("\uD83D\uDD04 Iniciando sesi\xf3n con email..."),t=await (0,i.e5)(r,b,j)),console.log("✅ Login exitoso"),(null==t?void 0:t.user)&&await E(t.user,s)}catch(s){console.error("❌ Error:",s);let t="Error al iniciar sesi\xf3n.";"auth/user-not-found"===s.code?t="No existe una cuenta con este email.":"auth/wrong-password"===s.code?t="Contrase\xf1a incorrecta.":"auth/email-already-in-use"===s.code?t="Este email ya est\xe1 registrado.":"auth/weak-password"===s.code?t="La contrase\xf1a debe tener al menos 6 caracteres.":"auth/invalid-email"===s.code&&(t="Email inv\xe1lido."),e({variant:"destructive",title:"Error",description:t}),r(!1)}}};return n?(0,s.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center",style:{backgroundColor:"#96e4e6"},children:[(0,s.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-slate-900"}),(0,s.jsx)("p",{className:"mt-4 text-lg font-semibold text-slate-900",children:"Cargando tu tablero..."})]}):(0,s.jsx)("div",{className:"min-h-screen w-full flex flex-col items-center justify-center",style:{backgroundColor:"#96e4e6"},children:(0,s.jsxs)("div",{className:"w-full max-w-md px-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-8 text-center",children:[(0,s.jsx)("div",{className:"h-16 w-16 bg-black rounded-full flex items-center justify-center mb-4 shadow-lg",children:(0,s.jsxs)("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#00ffaa"}),(0,s.jsx)("stop",{offset:"50%",stopColor:"#00d4ff"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#0066ff"})]})}),(0,s.jsx)("path",{d:"M6 18C6 14 8 12 12 12C14 12 16 13 18 14C20 15 22 16 24 16C26 16 28 15 30 14C32 13 34 14 34 18C34 22 32 24 30 24C28 24 26 23 24 22C22 21 20 20 18 20C16 20 14 21 12 22C10 23 8 22 6 18Z",fill:"url(#logoGradient)"})]})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Mi cerebro"}),(0,s.jsx)("p",{className:"text-slate-500 text-lg",children:"Tu lienzo de ideas infinitas."})]}),(0,s.jsx)("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:h?(0,s.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:y?"Crear cuenta":"Iniciar sesi\xf3n"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:y?"Ingresa tus datos para registrarte":"Ingresa tu email y contrase\xf1a"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-slate-700",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",value:b,onChange:e=>w(e.target.value),required:!0,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#16b5a8] focus:border-transparent",placeholder:"tu@email.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-sm font-medium text-slate-700",children:"Contrase\xf1a"}),(0,s.jsx)("input",{id:"password",type:"password",value:j,onChange:e=>N(e.target.value),required:!0,minLength:6,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#16b5a8] focus:border-transparent",placeholder:"••••••"})]}),(0,s.jsxs)(m.z,{type:"submit",disabled:t,size:"lg",className:"w-full bg-[#16b5a8] hover:bg-[#139c91] text-white h-12",children:[t?(0,s.jsx)(l.Z,{className:"h-5 w-5 animate-spin mr-2"}):y?(0,s.jsx)(p,{className:"h-5 w-5 mr-2"}):(0,s.jsx)(u,{className:"h-5 w-5 mr-2"}),t?"Cargando...":y?"Crear cuenta":"Iniciar sesi\xf3n"]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("button",{type:"button",onClick:()=>v(!y),className:"text-[#16b5a8] hover:underline",children:y?"\xbfYa tienes cuenta?":"\xbfNo tienes cuenta?"}),(0,s.jsx)("button",{type:"button",onClick:()=>{g(!1),w(""),N("")},className:"text-slate-500 hover:text-slate-700",children:"Volver"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(m.z,{onClick:S,disabled:t,size:"lg",className:"w-full bg-white hover:bg-slate-50 text-slate-900 border-2 border-slate-200 hover:border-slate-300 shadow-sm h-12",type:"button",children:[t?(0,s.jsx)(l.Z,{className:"h-5 w-5 animate-spin mr-2"}):(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",className:"mr-2",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Iniciar con Google"]}),(0,s.jsxs)(m.z,{onClick:D,disabled:t,size:"lg",className:"w-full bg-[#16b5a8] hover:bg-[#139c91] text-white h-12",type:"button",children:[t?(0,s.jsx)(l.Z,{className:"h-5 w-5 animate-spin mr-2"}):(0,s.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Invitado"]}),(0,s.jsxs)("div",{className:"relative my-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("span",{className:"w-full border-t border-slate-200"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-white px-2 text-slate-400",children:"O usa email"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(m.z,{onClick:()=>{g(!0),v(!1)},variant:"outline",size:"lg",className:"w-full h-12",type:"button",children:[(0,s.jsx)(u,{className:"h-4 w-4 mr-2"}),"Login"]}),(0,s.jsxs)(m.z,{onClick:()=>{g(!0),v(!0)},variant:"outline",size:"lg",className:"w-full h-12",type:"button",children:[(0,s.jsx)(p,{className:"h-4 w-4 mr-2"}),"Crear cuenta"]})]})]})})]})})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(57437),a=r(2265),n=r(37053),i=r(90535),o=r(93448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return p}});var s=r(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(61994),a=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},37053:function(e,t,r){"use strict";r.d(t,{Z8:function(){return d},g7:function(){return u}});var s,a=r(2265),n=r(98575),i=r(57437),o=Symbol.for("react.lazy"),l=(s||(s=r.t(a,2)))[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===o&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(c(r)&&"function"==typeof l&&(r=l(r._payload)),a.isValidElement(r)){var i;let e,o;let l=(i=r,(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.props.ref:i.props.ref||i.ref),c=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,n.F)(t,l):l),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:s,...n}=e;c(s)&&"function"==typeof l&&(s=l(s._payload));let o=a.Children.toArray(s),d=o.find(f);if(d){let e=d.props.children,s=o.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...n,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,i.jsx)(t,{...n,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var u=d("Slot"),p=Symbol("radix.slottable");function f(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===p}},53459:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},67350:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[358,637,279,899,876,971,117,744],function(){return e(e.s=67878)}),_N_E=e.O()}]);